# Migration `20200410084607-5`

This migration has been generated by Daniel Wallace at 4/10/2020, 8:46:07 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."address" ALTER COLUMN "company" DROP NOT NULL,
ALTER COLUMN "country" SET DEFAULT 'US',
ALTER COLUMN "street2" DROP NOT NULL;

ALTER TABLE "public"."brand" ALTER COLUMN "description" DROP NOT NULL,
ALTER COLUMN "founded" DROP NOT NULL;

ALTER TABLE "public"."category" ALTER COLUMN "description" DROP NOT NULL,
ALTER COLUMN "parent_id" DROP NOT NULL;

ALTER TABLE "public"."inventory" DROP CONSTRAINT IF EXiSTS "inventory_bin_id_fkey",
ALTER COLUMN "bin_id" DROP NOT NULL,
ALTER COLUMN "member_id" DROP NOT NULL,
ALTER COLUMN "return_reason" DROP NOT NULL,
ALTER COLUMN "serial" DROP NOT NULL,
ALTER COLUMN "sku" DROP NOT NULL;

ALTER TABLE "public"."order" DROP COLUMN "productId",
ALTER COLUMN "airbox" SET DEFAULT false,
ALTER COLUMN "canceled" DROP NOT NULL,
ALTER COLUMN "completed" DROP NOT NULL,
ALTER COLUMN "confirmed" DROP NOT NULL,
ALTER COLUMN "coupon" DROP NOT NULL,
ALTER COLUMN "expedited" SET DEFAULT false,
ALTER COLUMN "plan" DROP NOT NULL,
ALTER COLUMN "shipKit" SET DEFAULT false;

ALTER TABLE "public"."product" ALTER COLUMN "demand" SET DEFAULT 0,
ALTER COLUMN "depth" DROP NOT NULL,
ALTER COLUMN "description" DROP NOT NULL,
ALTER COLUMN "elastic_id" DROP NOT NULL,
ALTER COLUMN "height" DROP NOT NULL,
ALTER COLUMN "mfr" DROP NOT NULL,
ALTER COLUMN "popularity" SET DEFAULT 0,
ALTER COLUMN "released" DROP NOT NULL,
ALTER COLUMN "weight" DROP NOT NULL,
ALTER COLUMN "width" DROP NOT NULL;

ALTER TABLE "public"."warehouse" DROP COLUMN "company",
ALTER COLUMN "street2" DROP NOT NULL;

ALTER TABLE "public"."inventory" ADD FOREIGN KEY ("bin_id")REFERENCES "public"."bin"("id") ON DELETE SET NULL  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200409143454-initial..20200410084607-5
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 generator client {
   provider = "prisma-client-js"
@@ -10,10 +10,10 @@
 model Brand {
   id          String    @default(cuid()) @id
   name        String
   slug        String    @unique
-  description String
-  founded     DateTime
+  description String?
+  founded     DateTime?
   created     DateTime  @default(now())
   products    Product[]
   @@map("brand")
@@ -22,10 +22,10 @@
 model Category {
   id          String    @default(cuid()) @id
   name        String
   slug        String    @unique
-  description String
-  parentId    String    @map("parent_id")
+  description String?
+  parentId    String?   @map("parent_id")
   created     DateTime  @default(now())
   products    Product[]
   @@map("category")
@@ -34,21 +34,21 @@
 model Product {
   id          String      @default(cuid()) @id
   name        String
   slug        String      @unique
-  description String
+  description String?
   active      Boolean     @default(true)
-  width       Float
-  height      Float
-  depth       Float
-  weight      Float
+  width       Float?
+  height      Float?
+  depth       Float?
+  weight      Float?
   images      String[]
-  mfr         String
+  mfr         String?
   price       Float
-  popularity  Int
-  demand      Int
-  released    DateTime
-  elasticId   String      @map("elastic_id")
+  popularity  Int         @default(0)
+  demand      Int         @default(0)
+  released    DateTime?
+  elasticId   String?     @map("elastic_id")
   created     DateTime    @default(now())
   inventory   Inventory[]
   brand       Brand       @relation(fields: [brandId], references: [id])
   brandId     String      @map("brand_id")
@@ -86,23 +86,23 @@
 }
 model Inventory {
   id                 String             @default(cuid()) @id
-  serial             String
-  sku                String
+  serial             String?
+  sku                String?
   active             Boolean            @default(true)
   condition          InventoryCondition @default(NEW)
   status             InventoryStatus    @default(NEW)
   includedEssentials String[]           @map("included_essentials")
-  returnReason       String             @map("return_reason")
+  returnReason       String?            @map("return_reason")
   return             Boolean            @default(false)
   created            DateTime           @default(now())
-  bin                Bin                @relation(fields: [binId], references: [id])
-  binId              String             @map("bin_id")
+  bin                Bin?               @relation(fields: [binId], references: [id])
+  binId              String?            @map("bin_id")
   product            Product            @relation(fields: [productId], references: [id])
   productId          String             @map("product_id")
   userId             String             @map("user_id")
-  memberId           String             @map("member_id")
+  memberId           String?            @map("member_id")
   shipments          Shipment[]         @relation("shipment_inventory", references: [id])
   orders             Order[]            @relation("order_inventory", references: [id])
   @@map("inventory")
@@ -138,17 +138,17 @@
 model Address {
   id              String     @default(cuid()) @id
   street1         String
-  street2         String
+  street2         String?
   city            String
   state           String
   zip             String
-  country         String
+  country         String     @default("US")
   residential     Boolean
   carrierFacility String     @map("carrier_facility")
   name            String
-  company         String
+  company         String?
   phone           String
   email           String
   created         DateTime   @default(now())
   easyPostId      String     @map("easy_post_id")
@@ -160,17 +160,16 @@
 model Warehouse {
   id              String   @default(cuid()) @id
   street1         String
-  street2         String
+  street2         String?
   city            String
   state           String
   zip             String
   country         String
   residential     Boolean
   carrierFacility String   @map("carrier_facility")
   name            String
-  company         String
   phone           String
   email           String
   created         DateTime @default(now())
   easyPostId      String   @map("easy_post_id")
@@ -239,17 +238,16 @@
   id        String      @default(cuid()) @id
   products  Product[]   @relation("order_product", references: [id])
   inventory Inventory[] @relation("order_inventory", references: [id])
   created   DateTime    @default(now())
-  canceled  DateTime
-  completed DateTime
-  confirmed DateTime
-  shipKit   Boolean
-  airbox    Boolean
-  coupon    String
-  plan      String
-  expedited Boolean
+  canceled  DateTime?
+  completed DateTime?
+  confirmed DateTime?
+  shipKit   Boolean     @default(false)
+  airbox    Boolean     @default(false)
+  coupon    String?
+  plan      String?
+  expedited Boolean     @default(false)
   userId    String      @map("user_id")
-  productId String?
   @@map("order")
 }
```


