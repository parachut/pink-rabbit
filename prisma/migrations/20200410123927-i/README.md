# Migration `20200410123927-i`

This migration has been generated by Daniel Wallace at 4/10/2020, 12:39:27 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."inventory" ADD COLUMN "orderItemsId" text   ;

DROP TABLE "public"."_order_product";
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200410111639-j..20200410123927-i
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 generator client {
   provider = "prisma-client-js"
@@ -53,9 +53,8 @@
   brand       Brand       @relation(fields: [brandId], references: [id])
   brandId     String      @map("brand_id")
   category    Category    @relation(fields: [categoryId], references: [id])
   categoryId  String      @map("category_id")
-  orders      Order[]     @relation("order_product", references: [id])
   @@map("product")
 }
@@ -103,8 +102,9 @@
   userId             String             @map("user_id")
   memberId           String?            @map("member_id")
   shipments          Shipment[]         @relation("shipment_inventory", references: [id])
   orders             Order[]            @relation("order_inventory", references: [id])
+  orderItemsId       String?
   @@map("inventory")
 }
@@ -237,9 +237,8 @@
 }
 model Order {
   id        String      @default(uuid()) @id
-  products  Product[]   @relation("order_product", references: [id])
   inventory Inventory[] @relation("order_inventory", references: [id])
   created   DateTime    @default(now())
   canceled  DateTime?
   completed DateTime?
@@ -249,7 +248,20 @@
   coupon    String?
   plan      String?
   expedited Boolean     @default(false)
   userId    String      @map("user_id")
+  items     OrderItem[]
   @@map("order")
+}
+
+model OrderItem {
+  id        String   @default(uuid()) @id
+  product   Product  @relation(fields: [productId], references: [id])
+  productId String   @map("product_id")
+  quantity  Int      @default(1)
+  order     Order    @relation(fields: [orderId], references: [id])
+  orderId   String   @map("order_id")
+  created   DateTime @default(now())
+
+  @@map("order")
 }
```


